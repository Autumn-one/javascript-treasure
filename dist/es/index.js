async function e(e,n=5e3){for(let i=0;i<e.length;i++){try{var r=await t(e[i],null,n)}catch(e){continue}return r}return Promise.reject("错误的 promise queue 调用")}function t(e,t=null,n=null,r=!1){let i,o=e;return"number"==typeof t&&(r?(o=Promise.all([e,new Promise((e=>setTimeout(e,t)))]),i="all"):(o=Promise.allSettled([e,new Promise(((e,n)=>setTimeout(n,t)))]),i="allSettled")),"number"==typeof n&&(o=Promise.race([o,new Promise(((e,t)=>setTimeout((()=>t({type:"timeout",msg:"timeout error"})),n)))])),o.then((e=>"all"===i&&Array.isArray(e)?e[0]:"allSettled"===i&&Array.isArray(e)?e.find((e=>"fulfilled"===e.status))?.value:e))}function n(e,t=1e3){return"undefined"!=typeof requestIdleCallback?requestIdleCallback(e):setTimeout(e,t)}function r(e=1e3){return new Promise((t=>{n(t,e)}))}function i(e,t,n="d",r){let i,o,u=0,l="timeout",a=!0;return"i-d"===n?function(...n){if(a)return a=!1,o=setTimeout((()=>a=!0),t),r&&r(),void e.apply(this,n);i&&clearTimeout(i),o&&clearTimeout(o),r&&r(),i=setTimeout((()=>{o=setTimeout((()=>a=!0),t),e.apply(this,n)}),t)}:"t-d"===n?function(...n){const o=+new Date;i&&clearTimeout(i);const a=o-u;if("immediate"!==l&&(a>=t||0==u))return u=o,l="immediate",r&&r(),void e.apply(this,n);"immediate"===l&&a>=t&&(r&&r(),i=setTimeout((()=>{u=o,l="timeout",e.apply(this,n)}),t))}:function(...n){i&&clearTimeout(i),r&&r(),i=setTimeout((()=>{e.apply(this,n)}),t)}}function o(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function u(e,t){let n=0;return function(...r){const i=+new Date;let o;"number"==typeof t?o=t:(o=t.time,r.push(t)),(i-n>=o||0===n)&&(e.apply(this,r),n=i)}}async function l(e,t){let n=0;const r=t?.times??1,i=t?.on_failed;for(;n<r;){try{var o=await e()}catch(e){n++,i?.(e,n);continue}break}return o}function a(e,t){if(null===e||null===t)return e===t;const n=Array.from(new Set([...Object.keys(e),...Object.keys(t)]));for(const r of n){const n=e[r],i=t[r],u=o(n)&&o(i);if((!["",void 0].includes(n)||!["",void 0].includes(i))&&(u&&!a(n,i)||!u&&n!==i))return!1}return!0}function s(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"")}export{r as async_idle,i as debounce,a as deep_equal,n as idle,o as is_object,s as pascal_to_kebab,e as promise_queue,t as promise_timeout,l as retry,u as throttle};
